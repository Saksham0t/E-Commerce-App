<nav class="mainheader navbar navbar-expand-lg navbar-dark bg-dark px-4" *ngIf="showHeader">
  <!-- Brand / Logo -->
  <a class="navbar-brand d-flex align-items-center" routerLink="/">
    <img
      src="/logo.png"
      alt="Logo"
      class="me-2"
      style="height: 75px; width: 75px; margin-top: -13px; margin-bottom: -13px"
    />
    <span class="fw-bold fs-4 text-gradient">Matrix</span>
  </a>

  <!-- Mobile toggle button -->
  <button
    class="navbar-toggler"
    type="button"
    data-bs-toggle="collapse"
    data-bs-target="#navbarContent"
  >
    <span class="navbar-toggler-icon"></span>
  </button>

  <!-- Navbar content -->
  <div class="collapse navbar-collapse" id="navbarContent">
    <!-- Search Bar -->
    <form class="d-flex mx-auto w-50">
      <input
        class="form-control me-2"
        type="search"
        placeholder="Search Products"
        aria-label="Search"
      />
      <button class="btn btn-outline-light" type="submit">Search</button>
    </form>

    <!-- Navigation Links -->
    <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
      <li class="nav-item">
        <a class="nav-link" routerLink="/admin-login">Admin</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" routerLink="/home">Home</a>
      </li>

      <!-- Cart Link with Live Count -->
      <li class="nav-item">
        <a class="nav-link position-relative" routerLink="/cart">
          <img
            src="https://cdn-icons-png.flaticon.com/512/1170/1170678.png"
            alt="Cart"
            width="20"
            class="me-1"
            style="filter: brightness(0) invert(1)"
          />
          Cart @if (cartCount > 0) {
          <span class="badge bg-danger position-absolute top-0 start-100 translate-middle">
            {{ cartCount }}
          </span>
          }
        </a>
      </li>

      <!-- Profile Dropdown -->
      <li class="nav-item dropdown">
        <a
          class="nav-link dropdown-toggle d-flex align-items-center"
          href="#"
          id="profileDropdown"
          role="button"
          data-bs-toggle="dropdown"
          aria-expanded="false"
        >
          <i class="bi bi-person-circle me-2 fs-5"></i>
          {{ userName }}
        </a>
        <ul
          class="dropdown-menu dropdown-menu-end shadow-lg border-0 rounded-3"
          aria-labelledby="profileDropdown"
        >
          <li>
            <a class="dropdown-item py-2" routerLink="/profile">
              <i class="bi bi-person-lines-fill me-2 text-primary"></i> My Profile
            </a>
          </li>
          <li>
            <a class="dropdown-item py-2" routerLink="/orders">
              <i class="bi bi-bag-check-fill me-2 text-success"></i> My Orders
            </a>
          </li>
          <li><hr class="dropdown-divider" /></li>
          <li>
            <a class="dropdown-item py-2 text-danger fw-semibold" (click)="logout()">
              <i class="bi bi-box-arrow-right me-2"></i> Logout
            </a>
          </li>
        </ul>
      </li>
    </ul>
  </div>
</nav>

<router-outlet></router-outlet>
