<!-- Wrap the whole page in bg-light -->
<div class="bg-light min-vh-100 py-4">
  <!-- Carousel -->
  <div id="carouselExample" class="carousel slide" data-bs-ride="carousel">
    <div class="carousel-inner">
      <div class="carousel-item active">
        <!-- <iframe class="d-block w-100" height="500"
            src=""></iframe> -->
        <video
          alt="Hero banner 1"
          class="d-block w-100"
          autoplay
          loop
          src="../../../assets/NewSeason.mp4"
        ></video>
        <!-- <a href="/search?name=Fashion%20Wear%20(Ladies)">
          <iframe class="d-block w-100" height="500"
            src=""></iframe> 
            <video  alt="Hero banner 1" class="d-block w-100" autoplay loop src="../../../assets/C2.mp4"></video></a> -->
      </div>

      <div class="carousel-item">
        <video
          alt="Hero banner 1"
          class="d-block w-100"
          autoplay
          loop
          src="../../../assets/Womens.mp4"
        ></video>
      </div>
      <div class="carousel-item">
        <video
          alt="Hero banner 2"
          class="d-block w-100"
          autoplay
          loop
          src="../../../assets/Sneakers.mp4"
        ></video>
      </div>
      <div class="carousel-item">
        <video
          alt="Hero banner 3"
          class="d-block w-100"
          autoplay
          loop
          src="../../../assets/Tech.mp4"
        ></video>
      </div>
      <div class="carousel-item">
        <video
          alt="Hero banner 4"
          class="d-block w-100"
          autoplay
          loop
          src="../../../assets/Makeup.mp4"
        ></video>
      </div>

      <div class="carousel-item">
        <img
          alt="Hero banner 5"
          class="d-block w-100"
          autoplay
          loop
          src="../../../assets/Mens.png"
        >

      </div>
      <div class="carousel-item">
        <video
          alt="Hero banner "
          class="d-block w-100"
          autoplay
          loop
          src="../../../assets/Watch.mp4"
        ></video>
      </div>
    </div>

    <!-- Carousel controls -->
    <button
      class="carousel-control-prev"
      type="button"
      data-bs-target="#carouselExample"
      data-bs-slide="prev"
    >
      <span class="carousel-control-prev-icon"></span>
      <span class="visually-hidden">Previous</span>
    </button>
    <button
      class="carousel-control-next"
      type="button"
      data-bs-target="#carouselExample"
      data-bs-slide="next"
    >
      <span class="carousel-control-next-icon"></span>
      <span class="visually-hidden">Next</span>
    </button>
  </div>

  <br />

  <!-- Products by Category -->
  @for (category of productsByCategory | keyvalue; track category.key) {
  <div class="mb-5 mx-3">
    <h2 class="mb-4 text-center text-uppercase fw-bold border-bottom pb-2">
      {{ category.key }}
    </h2>

    <div class="row g-4">
      @for (product of category.value; track product.id) {
      <div class="col-sm-6 col-md-4 col-lg-3">
        <div class="card h-100 shadow-sm border-0">
          <img
            [src]="product.ImageURL"
            class="card-img-top"
            [alt]="product.name"
            style="height: 200px; object-fit: cover"
          />

          <div class="card-body d-flex flex-column">
            <h5 class="card-title">{{ product.name }}</h5>
            <p class="card-text text-muted small">{{ product.Description }}</p>
            <p class="card-text fw-bold text-success">â‚¹{{ product.Price }}</p>

            @if (addedToCart.has(product.id)) {
            <!-- Confirmation + View Cart -->
            <div class="mt-auto text-center">
              <p class="text-success fw-semibold mb-2">
                <i class="bi bi-check-circle-fill me-1"></i>
                Item added to cart
              </p>
              <a routerLink="/cart" class="btn btn-primary btn-sm">
                <i class="bi bi-cart-fill me-1"></i>
                View Cart
              </a>
            </div>
            } @else {
            <!-- Add to Cart button -->
            <button class="btn btn-outline-primary mt-auto" (click)="addToCart(product)">
              <i class="bi bi-cart-plus"></i>
              Add to Cart
            </button>
            }
          </div>
        </div>
      </div>
      }
    </div>
  </div>
  }
</div>

<!-- Scroll to Top Button -->
<button
  *ngIf="showScrollTopButton"
  (click)="scrollToTop()"
  id="scrollTopBtn"
  class="d-flex justify-content-center align-items-center"
>
  <i class="bi bi-arrow-up"></i>
</button>
