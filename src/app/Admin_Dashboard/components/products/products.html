<div class="container-fluid px-5 py-5">
<h3 class="my-3">üõçÔ∏è Explore All Products</h3>

<!-- Search and Sort Controls -->
<div class="row mb-3 align-items-center">
  <div class="col-md-6">
    <input type="text" class="form-control" placeholder="Search by Product Name" [(ngModel)]="searchTerm">
  </div>
  <div class="col-md-6 text-md-end mt-2 mt-md-0">
    <label for="sortSelect" class="me-2 fw-semibold text-muted">Sort By:</label>
    <select id="sortSelect" class="form-select form-select-sm d-inline-block w-auto" [(ngModel)]="selectedSort" (change)="sortProducts()">
      <option value="priceAsc">Price: Low to High</option>
      <option value="priceDesc">Price: High to Low</option>
      <option value="nameAsc">Name: A to Z</option>
      <option value="nameDesc">Name: Z to A</option>
    </select>
  </div>
</div>

<div class="text-end mt-3">
  <button class="btn btn-success" (click)="openAddModal()">‚ûï Add New Product</button>
</div>

<br>

<table class="table table-bordered table-hover text-center align-middle">
  <thead class="table-light">
    <tr>
      <th>ID</th>
      <th>Image</th>
      <th>Name</th>
      <th>Price</th>
      <th>Category</th>
      <th>Description</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let p of getFilteredProducts()">
      <td class="fw-semibold">#{{ p.id }}</td>
      <td>
        <img [src]="p.ImageURL" alt="{{ p.name }}" width="60" class="rounded border">
      </td>
      <td>{{ p.name }}</td>
      <td class="text-success fw-bold">‚Çπ{{ p.Price }}</td>
      <td><span class="badge">{{ p.Category }}</span></td>
      <td class="text-muted small text-center px-3">{{ p.Description }}</td>
      <td>
        <button class="btn" (click)="openManageModal(p)">
          <i class="bi bi-pencil-fill me-2"></i> Manage
        </button>
      </td>
    </tr>
  </tbody>
</table>



<!-- Add Product Button -->

<!-- Manage Product Modal -->
<div class="modal" tabindex="-1" [ngClass]="{ 'show d-block': selectedProduct }" *ngIf="selectedProduct">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header bg-primary text-white">
        <h5 class="modal-title">Manage Product: {{ selectedProduct.name }}</h5>
        <button type="button" class="btn-close" (click)="closeModal()"></button>
      </div>
      <div class="modal-body">
        <div class="mb-2">
          <label class="form-label">Name:</label>
          <input class="form-control" [(ngModel)]="selectedProduct.name">
        </div>
        <div class="mb-2">
          <label class="form-label">Price:</label>
          <input class="form-control" type="number" [(ngModel)]="selectedProduct.Price">
        </div>
        <div class="mb-2">
          <label class="form-label">Category:</label>
          <input class="form-control" [(ngModel)]="selectedProduct.Category">
        </div>
        <div class="mb-2">
          <label class="form-label">Description:</label>
          <textarea class="form-control" [(ngModel)]="selectedProduct.Description"></textarea>
        </div>
        <div class="mb-2">
          <label class="form-label">Image URL:</label>
          <input class="form-control" [(ngModel)]="selectedProduct.ImageURL">
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-danger" (click)="deleteProduct()">Delete</button>
        <button class="btn btn-primary" (click)="saveProduct()">Save</button>
        <button class="btn btn-secondary" (click)="closeModal()">Close</button>
      </div>
    </div>
  </div>
</div>

<!-- Add Product Modal -->
<div class="modal" tabindex="-1" [ngClass]="{ 'show d-block': showAddModal }" *ngIf="showAddModal">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header bg-success text-white">
        <h5 class="modal-title">Add New Product</h5>
        <button type="button" class="btn-close" (click)="closeModal()"></button>
      </div>
      <div class="modal-body">
        <div class="mb-2">
          <label class="form-label">Name:</label>
          <input class="form-control" [(ngModel)]="newProduct.name">
        </div>
        <div class="mb-2">
          <label class="form-label">Price:</label>
          <input class="form-control" type="number" [(ngModel)]="newProduct.Price">
        </div>
        <div class="mb-2">
          <label class="form-label">Category:</label>
          <input class="form-control" [(ngModel)]="newProduct.Category">
        </div>
        <div class="mb-2">
          <label class="form-label">Description:</label>
          <textarea class="form-control" [(ngModel)]="newProduct.Description"></textarea>
        </div>
        <div class="mb-2">
          <label class="form-label">Image URL:</label>
          <input class="form-control" [(ngModel)]="newProduct.ImageURL">
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-success" (click)="addProduct()">Add Product</button>
        <button class="btn btn-secondary" (click)="closeModal()">Cancel</button>
      </div>
    </div>
  </div>
</div>
</div>

