<h3 class="my-3">üõçÔ∏è Explore All Products</h3>
<input type="text" class="form-control mb-3" placeholder="Search by Product Name"
         [(ngModel)]="searchTerm">
<div class="sort-container">
  <label for="sortSelect">Sort By:</label>
  <select id="sortSelect" [(ngModel)]="selectedSort" (change)="sortProducts()">
    <option value="priceAsc">Price: Low to High</option>
    <option value="priceDesc">Price: High to Low</option>
    <option value="nameAsc">Name: A to Z</option>
    <option value="nameDesc">Name: Z to A</option>
  </select>
</div>
<table class="table table-hover table-bordered">
  <thead class="table-dark">
    <tr>
      <th>Image</th>
      <th>Name</th>
      <th>Price</th>
      <th>Category</th>
      <th>Description</th>
      <th>Modify Product</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let p of getFilteredProducts()" >
      <td><img [src]="p.ImageURL" alt="{{p.name}}" width="100" class="img-thumbnail" /></td>
      <td>{{ p.name }}</td>
      <td>{{ p.Price }}</td>
      <td>{{ p.Category }}</td>
      <td>{{ p.Description }}</td>
      <td><button class="btn btn-sm btn-outline-primary" (click)="openManageModal(p)">Manage</button></td>
    </tr>
  </tbody>
</table>

<!-- Add Product Button -->
<div class="text-end mt-3">
  <button class="btn btn-success" (click)="openAddModal()">‚ûï Add New Product</button>
</div>

<!-- Manage Product Modal -->
<div class="modal" tabindex="-1" [ngClass]="{ 'show d-block': selectedProduct }" *ngIf="selectedProduct">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Manage Product: {{ selectedProduct.name }}</h5>
        <button type="button" class="btn-close" (click)="closeModal()"></button>
      </div>
      <div class="modal-body">
        <label>Name:</label>
        <input class="form-control mb-2" [(ngModel)]="selectedProduct.name" />
        <label>Price:</label>
        <input class="form-control mb-2" type="number" [(ngModel)]="selectedProduct.Price" />
        <label>Category:</label>
        <input class="form-control mb-2" [(ngModel)]="selectedProduct.Category" />
        <label>Description:</label>
        <textarea class="form-control mb-2" [(ngModel)]="selectedProduct.Description"></textarea>
        <label>Image URL:</label>
        <input class="form-control mb-2" [(ngModel)]="selectedProduct.ImageURL" />
      </div>
      <div class="modal-footer">
        <button class="btn btn-danger" (click)="deleteProduct()">Delete</button>
        <button class="btn btn-primary" (click)="saveProduct()">Save</button>
        <button class="btn btn-secondary" (click)="closeModal()">Close</button>
      </div>
    </div>
  </div>
</div>

<!-- Add Product Modal -->
<div class="modal" tabindex="-1" [ngClass]="{ 'show d-block': showAddModal }" *ngIf="showAddModal">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Add New Product</h5>
        <button type="button" class="btn-close" (click)="closeModal()"></button>
      </div>
      <div class="modal-body">
        <label>Name:</label>
        <input class="form-control mb-2" [(ngModel)]="newProduct.name" />
        <label>Price:</label>
        <input class="form-control mb-2" type="number" [(ngModel)]="newProduct.Price" />
        <label>Category:</label>
        <input class="form-control mb-2" [(ngModel)]="newProduct.Category" />
        <label>Description:</label>
        <textarea class="form-control mb-2" [(ngModel)]="newProduct.Description"></textarea>
        <label>Image URL:</label>
        <input class="form-control mb-2" [(ngModel)]="newProduct.ImageURL" />
      </div>
      <div class="modal-footer">
        <button class="btn btn-success" (click)="addProduct()">Add Product</button>
        <button class="btn btn-secondary" (click)="closeModal()">Cancel</button>
      </div>
    </div>
  </div>
</div>